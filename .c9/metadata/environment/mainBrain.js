{"filter":false,"title":"mainBrain.js","tooltip":"/mainBrain.js","undoManager":{"mark":3,"position":3,"stack":[[{"start":{"row":0,"column":0},"end":{"row":9,"column":41},"action":"insert","lines":["var brain = require('brain');","","var net = new brain.NeuralNetwork();","","net.train([{input: [0, 0], output: [0]},","           {input: [0, 1], output: [1]},","           {input: [1, 0], output: [1]},","           {input: [1, 1], output: [0]}]);","","var output = net.run([1, 0]);  // [0.933]"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":9,"column":41},"action":"remove","lines":["var brain = require('brain');","","var net = new brain.NeuralNetwork();","","net.train([{input: [0, 0], output: [0]},","           {input: [0, 1], output: [1]},","           {input: [1, 0], output: [1]},","           {input: [1, 1], output: [0]}]);","","var output = net.run([1, 0]);  // [0.933]"],"id":2},{"start":{"row":0,"column":0},"end":{"row":39,"column":3},"action":"insert","lines":["var brain = require('brain');","var fs = require('fs');","","var getMnistData = function(content) {","\tvar lines = content.toString().split('\\n');","","\tvar data = [];","\tfor (var i = 0; i < lines.length; i++) {","\t\tvar input = lines[i].split(',').map(Number);","","\t\tvar output = Array.apply(null, Array(10)).map(Number.prototype.valueOf, 0);","\t\toutput[input.shift()] = 1;","","\t\tdata.push({","\t\t\tinput: input,","\t\t\toutput: output","\t\t});","\t}","","\treturn data;","};","","fs.readFile(__dirname + '/train.csv', function (err, trainContent) {","\tif (err) {","\t\tconsole.log('Error:', err);","\t}","","\tvar trainData = getMnistData(trainContent);","","\tconsole.log('Got ' + trainData.length + ' samples');","","\tvar net = new brain.NeuralNetwork({hiddenLayers: [784, 392, 196]});","","\tnet.train(trainData, {","\t\terrorThresh: 0.025,","\t\tlog: true,","\t\tlogPeriod: 1,","\t\tlearningRate: 0.1","\t});","});"]}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["/"],"id":3},{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["/"]}],[{"start":{"row":0,"column":0},"end":{"row":39,"column":3},"action":"remove","lines":["//var brain = require('brain');","var fs = require('fs');","","var getMnistData = function(content) {","\tvar lines = content.toString().split('\\n');","","\tvar data = [];","\tfor (var i = 0; i < lines.length; i++) {","\t\tvar input = lines[i].split(',').map(Number);","","\t\tvar output = Array.apply(null, Array(10)).map(Number.prototype.valueOf, 0);","\t\toutput[input.shift()] = 1;","","\t\tdata.push({","\t\t\tinput: input,","\t\t\toutput: output","\t\t});","\t}","","\treturn data;","};","","fs.readFile(__dirname + '/train.csv', function (err, trainContent) {","\tif (err) {","\t\tconsole.log('Error:', err);","\t}","","\tvar trainData = getMnistData(trainContent);","","\tconsole.log('Got ' + trainData.length + ' samples');","","\tvar net = new brain.NeuralNetwork({hiddenLayers: [784, 392, 196]});","","\tnet.train(trainData, {","\t\terrorThresh: 0.025,","\t\tlog: true,","\t\tlogPeriod: 1,","\t\tlearningRate: 0.1","\t});","});"],"id":4},{"start":{"row":0,"column":0},"end":{"row":30,"column":20},"action":"insert","lines":["","let trainedNet;","","function encode(arg) {","   return arg.split('').map(x => (x.charCodeAt(0) / 255));","}","","function processTrainingData(data) {","   return data.map(d => {","       return {","           input: encode(d.input),","           output: d.output","       }","   })","}","","function train(data) {","   let net = new brain.NeuralNetwork();","   net.train(processTrainingData(data));","   trainedNet = net.toFunction();","   console.log('Finished training...');","};","","function execute(input) {","   let results = trainedNet(encode(input));","   let output;","   results.trump > results.kardashian ? output = 'Trump' : output = 'Kardashian';","   return output;","}","","train(trainingData);"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":30,"column":20},"end":{"row":30,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1565359540482,"hash":"a50bf5a8a9b6db3deb21854b9375cbc397f83e75"}