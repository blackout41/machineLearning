{"filter":false,"title":"dashboard.controller.js","tooltip":"/Rail%20Road/client/app/controllers/dashboard.controller.js","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":89,"column":58},"end":{"row":89,"column":59},"action":"insert","lines":["S"],"id":168}],[{"start":{"row":89,"column":59},"end":{"row":89,"column":60},"action":"insert","lines":["t"],"id":169}],[{"start":{"row":89,"column":60},"end":{"row":89,"column":61},"action":"insert","lines":["a"],"id":170}],[{"start":{"row":89,"column":61},"end":{"row":89,"column":62},"action":"insert","lines":["t"],"id":171}],[{"start":{"row":89,"column":61},"end":{"row":89,"column":62},"action":"remove","lines":["t"],"id":172}],[{"start":{"row":89,"column":60},"end":{"row":89,"column":61},"action":"remove","lines":["a"],"id":173}],[{"start":{"row":89,"column":60},"end":{"row":89,"column":61},"action":"insert","lines":["o"],"id":174}],[{"start":{"row":89,"column":61},"end":{"row":89,"column":62},"action":"insert","lines":["r"],"id":175}],[{"start":{"row":89,"column":62},"end":{"row":89,"column":63},"action":"insert","lines":["a"],"id":176}],[{"start":{"row":89,"column":63},"end":{"row":89,"column":64},"action":"insert","lines":["g"],"id":177}],[{"start":{"row":89,"column":64},"end":{"row":89,"column":65},"action":"insert","lines":["e"],"id":178}],[{"start":{"row":89,"column":65},"end":{"row":89,"column":66},"action":"insert","lines":[" "],"id":179}],[{"start":{"row":89,"column":66},"end":{"row":89,"column":67},"action":"insert","lines":["F"],"id":180}],[{"start":{"row":89,"column":67},"end":{"row":89,"column":68},"action":"insert","lines":["e"],"id":181}],[{"start":{"row":89,"column":68},"end":{"row":89,"column":69},"action":"insert","lines":["e"],"id":182}],[{"start":{"row":89,"column":69},"end":{"row":89,"column":70},"action":"insert","lines":["s"],"id":183}],[{"start":{"row":89,"column":71},"end":{"row":89,"column":104},"action":"remove","lines":[", 'March', 'April', 'May', 'June'"],"id":184}],[{"start":{"row":84,"column":8},"end":{"row":84,"column":9},"action":"insert","lines":["l"],"id":185}],[{"start":{"row":84,"column":9},"end":{"row":84,"column":10},"action":"insert","lines":["e"],"id":186}],[{"start":{"row":84,"column":10},"end":{"row":84,"column":11},"action":"insert","lines":["t"],"id":187}],[{"start":{"row":84,"column":11},"end":{"row":84,"column":12},"action":"insert","lines":[" "],"id":188}],[{"start":{"row":84,"column":12},"end":{"row":84,"column":13},"action":"insert","lines":["r"],"id":189}],[{"start":{"row":84,"column":13},"end":{"row":84,"column":14},"action":"insert","lines":["e"],"id":190}],[{"start":{"row":84,"column":14},"end":{"row":84,"column":15},"action":"insert","lines":[" "],"id":191}],[{"start":{"row":84,"column":15},"end":{"row":84,"column":16},"action":"insert","lines":["="],"id":192}],[{"start":{"row":84,"column":15},"end":{"row":84,"column":16},"action":"remove","lines":["="],"id":193}],[{"start":{"row":84,"column":14},"end":{"row":84,"column":15},"action":"remove","lines":[" "],"id":194}],[{"start":{"row":84,"column":14},"end":{"row":84,"column":15},"action":"insert","lines":["s"],"id":195}],[{"start":{"row":84,"column":15},"end":{"row":84,"column":16},"action":"insert","lines":[" "],"id":196}],[{"start":{"row":84,"column":16},"end":{"row":84,"column":17},"action":"insert","lines":["="],"id":197}],[{"start":{"row":84,"column":17},"end":{"row":84,"column":18},"action":"insert","lines":[" "],"id":198}],[{"start":{"row":92,"column":27},"end":{"row":92,"column":30},"action":"remove","lines":["100"],"id":199},{"start":{"row":92,"column":27},"end":{"row":92,"column":28},"action":"insert","lines":["r"]}],[{"start":{"row":92,"column":28},"end":{"row":92,"column":29},"action":"insert","lines":["e"],"id":200}],[{"start":{"row":92,"column":29},"end":{"row":92,"column":30},"action":"insert","lines":["s"],"id":201}],[{"start":{"row":92,"column":30},"end":{"row":92,"column":32},"action":"insert","lines":["[]"],"id":202}],[{"start":{"row":92,"column":31},"end":{"row":92,"column":32},"action":"insert","lines":["d"],"id":203}],[{"start":{"row":92,"column":32},"end":{"row":92,"column":33},"action":"insert","lines":["a"],"id":204}],[{"start":{"row":92,"column":32},"end":{"row":92,"column":33},"action":"remove","lines":["a"],"id":205}],[{"start":{"row":92,"column":31},"end":{"row":92,"column":32},"action":"remove","lines":["d"],"id":206}],[{"start":{"row":92,"column":30},"end":{"row":92,"column":32},"action":"remove","lines":["[]"],"id":207}],[{"start":{"row":92,"column":30},"end":{"row":92,"column":31},"action":"insert","lines":["."],"id":208}],[{"start":{"row":92,"column":31},"end":{"row":92,"column":32},"action":"insert","lines":["d"],"id":209}],[{"start":{"row":92,"column":32},"end":{"row":92,"column":33},"action":"insert","lines":["a"],"id":210}],[{"start":{"row":92,"column":33},"end":{"row":92,"column":34},"action":"insert","lines":["t"],"id":211}],[{"start":{"row":92,"column":34},"end":{"row":92,"column":35},"action":"insert","lines":["a"],"id":212}],[{"start":{"row":92,"column":35},"end":{"row":92,"column":36},"action":"insert","lines":["."],"id":213}],[{"start":{"row":92,"column":36},"end":{"row":92,"column":65},"action":"insert","lines":["long-term-storage-fee-minimum"],"id":214}],[{"start":{"row":92,"column":65},"end":{"row":92,"column":66},"action":"insert","lines":["]"],"id":215}],[{"start":{"row":92,"column":35},"end":{"row":92,"column":36},"action":"remove","lines":["."],"id":216}],[{"start":{"row":92,"column":35},"end":{"row":92,"column":36},"action":"insert","lines":["["],"id":217}],[{"start":{"row":92,"column":36},"end":{"row":92,"column":37},"action":"insert","lines":["\""],"id":218}],[{"start":{"row":92,"column":66},"end":{"row":92,"column":67},"action":"insert","lines":["\""],"id":219}],[{"start":{"row":92,"column":70},"end":{"row":92,"column":72},"action":"remove","lines":["50"],"id":220},{"start":{"row":92,"column":70},"end":{"row":92,"column":111},"action":"insert","lines":["res.data[\"long-term-storage-fee-minimum\"]"]}],[{"start":{"row":92,"column":80},"end":{"row":92,"column":109},"action":"remove","lines":["long-term-storage-fee-minimum"],"id":221},{"start":{"row":92,"column":80},"end":{"row":92,"column":98},"action":"insert","lines":["total-storage-fees"]}],[{"start":{"row":84,"column":53},"end":{"row":85,"column":0},"action":"insert","lines":["",""],"id":222},{"start":{"row":85,"column":0},"end":{"row":85,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":85,"column":8},"end":{"row":85,"column":9},"action":"insert","lines":["c"],"id":223}],[{"start":{"row":85,"column":9},"end":{"row":85,"column":10},"action":"insert","lines":["o"],"id":224}],[{"start":{"row":85,"column":10},"end":{"row":85,"column":11},"action":"insert","lines":["n"],"id":225}],[{"start":{"row":85,"column":11},"end":{"row":85,"column":12},"action":"insert","lines":["s"],"id":226}],[{"start":{"row":85,"column":12},"end":{"row":85,"column":13},"action":"insert","lines":["o"],"id":227}],[{"start":{"row":85,"column":13},"end":{"row":85,"column":14},"action":"insert","lines":["l"],"id":228}],[{"start":{"row":85,"column":14},"end":{"row":85,"column":15},"action":"insert","lines":["."],"id":229}],[{"start":{"row":85,"column":15},"end":{"row":85,"column":16},"action":"insert","lines":["l"],"id":230}],[{"start":{"row":85,"column":16},"end":{"row":85,"column":17},"action":"insert","lines":["o"],"id":231}],[{"start":{"row":85,"column":17},"end":{"row":85,"column":18},"action":"insert","lines":["e"],"id":232}],[{"start":{"row":85,"column":18},"end":{"row":85,"column":19},"action":"insert","lines":["g"],"id":233}],[{"start":{"row":85,"column":19},"end":{"row":85,"column":21},"action":"insert","lines":["()"],"id":234}],[{"start":{"row":85,"column":19},"end":{"row":85,"column":21},"action":"remove","lines":["()"],"id":235}],[{"start":{"row":85,"column":18},"end":{"row":85,"column":19},"action":"remove","lines":["g"],"id":236}],[{"start":{"row":85,"column":17},"end":{"row":85,"column":18},"action":"remove","lines":["e"],"id":237}],[{"start":{"row":85,"column":17},"end":{"row":85,"column":18},"action":"insert","lines":["g"],"id":238}],[{"start":{"row":85,"column":18},"end":{"row":85,"column":20},"action":"insert","lines":["()"],"id":239}],[{"start":{"row":85,"column":19},"end":{"row":85,"column":20},"action":"insert","lines":["d"],"id":240}],[{"start":{"row":85,"column":20},"end":{"row":85,"column":21},"action":"insert","lines":["a"],"id":241}],[{"start":{"row":85,"column":21},"end":{"row":85,"column":22},"action":"insert","lines":["t"],"id":242}],[{"start":{"row":85,"column":22},"end":{"row":85,"column":23},"action":"insert","lines":["a"],"id":243}],[{"start":{"row":85,"column":22},"end":{"row":85,"column":23},"action":"remove","lines":["a"],"id":244}],[{"start":{"row":85,"column":21},"end":{"row":85,"column":22},"action":"remove","lines":["t"],"id":245}],[{"start":{"row":85,"column":20},"end":{"row":85,"column":21},"action":"remove","lines":["a"],"id":246}],[{"start":{"row":85,"column":19},"end":{"row":85,"column":20},"action":"remove","lines":["d"],"id":247}],[{"start":{"row":85,"column":19},"end":{"row":85,"column":20},"action":"insert","lines":["r"],"id":248}],[{"start":{"row":85,"column":20},"end":{"row":85,"column":21},"action":"insert","lines":["e"],"id":249}],[{"start":{"row":85,"column":21},"end":{"row":85,"column":22},"action":"insert","lines":["s"],"id":250}],[{"start":{"row":85,"column":23},"end":{"row":85,"column":24},"action":"insert","lines":["l"],"id":251}],[{"start":{"row":85,"column":23},"end":{"row":85,"column":24},"action":"remove","lines":["l"],"id":252}],[{"start":{"row":85,"column":23},"end":{"row":85,"column":24},"action":"insert","lines":[";"],"id":253}],[{"start":{"row":93,"column":27},"end":{"row":93,"column":100},"action":"remove","lines":["res.data[\"long-term-storage-fee-minimum\"], res.data[\"total-storage-fees\"]"],"id":254},{"start":{"row":93,"column":27},"end":{"row":93,"column":28},"action":"insert","lines":["1"]}],[{"start":{"row":93,"column":28},"end":{"row":93,"column":29},"action":"insert","lines":[","],"id":255}],[{"start":{"row":93,"column":29},"end":{"row":93,"column":30},"action":"insert","lines":["2"],"id":256}],[{"start":{"row":85,"column":14},"end":{"row":85,"column":15},"action":"insert","lines":["e"],"id":257}],[{"start":{"row":85,"column":0},"end":{"row":85,"column":25},"action":"remove","lines":["        console.log(res);"],"id":258}],[{"start":{"row":84,"column":53},"end":{"row":85,"column":0},"action":"remove","lines":["",""],"id":259}],[{"start":{"row":84,"column":9},"end":{"row":84,"column":18},"action":"remove","lines":["et res = "],"id":260}],[{"start":{"row":84,"column":8},"end":{"row":84,"column":9},"action":"remove","lines":["l"],"id":261}],[{"start":{"row":85,"column":8},"end":{"row":109,"column":11},"action":"remove","lines":["var ctx = document.getElementById('myChart').getContext('2d');","        var myChart = new Chart(ctx, {","            type: 'doughnut',","            data: {","                labels: ['Long Term Storage Fees', 'Total Storage Fees'],","                datasets: [{","                    label: 'Inventory Storage Fees',","                    data: [1,2],","                    backgroundColor: [","                        'rgba(255, 99, 132, 1)',","                        'rgba(54, 162, 235, 0.8)',","                    ],","                }]","            },","            options: {","                scales: {","                    yAxes: [{","                        ticks: {","                            beginAtZero: true","                        }","                    }],","                    xAxes:[]","                }","            }","        });"],"id":262}],[{"start":{"row":85,"column":4},"end":{"row":85,"column":8},"action":"remove","lines":["    "],"id":263}],[{"start":{"row":85,"column":0},"end":{"row":85,"column":4},"action":"remove","lines":["    "],"id":264}],[{"start":{"row":84,"column":43},"end":{"row":85,"column":0},"action":"remove","lines":["",""],"id":265}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["<<<<<<< HEAD",""],"id":266,"ignore":true},{"start":{"row":4,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["=======","app.controller('dashboardController', function ($scope, $window, cogsUnitService, userDetailsService, alertService) {","    ",">>>>>>> 2f70f64e508c84dc6402472937cc5ee2618a013c",""]},{"start":{"row":8,"column":61},"end":{"row":10,"column":8},"action":"insert","lines":["","","    try{"]},{"start":{"row":11,"column":0},"end":{"row":11,"column":4},"action":"insert","lines":["    "]},{"start":{"row":12,"column":4},"end":{"row":12,"column":6},"action":"insert","lines":["  "]},{"start":{"row":12,"column":6},"end":{"row":12,"column":8},"action":"insert","lines":["  "]},{"start":{"row":13,"column":4},"end":{"row":22,"column":24},"action":"remove","lines":["$scope.hasListedCogs = false;","","    ","    var hash = window.location.hash;","    if (hash) {","        $(\"#cogsLink\").attr(\"class\", \"nav-link active\");","        window.location.href = \"#cogsDiv\";","        $(\"#userDetailsDiv\").attr(\"class\", \"tab-pane\");","        $(\"#cogsDiv\").attr(\"class\", \"tab-pane in active\");","        listCogsPerUnit("]},{"start":{"row":13,"column":4},"end":{"row":100,"column":9},"action":"insert","lines":["    // Dont pass this to the front end $scope.email = $scope.userDetails.email;","    }catch{","        window.location.href = \"/logout\";","    }","","    $scope.hasListedCogs = false;","","<<<<<<< HEAD","    ","=======","    userDetailsService.fetchPaymentInfo($scope.sellerId, response => {","        $scope.cardInfo = response.data[0].last4;","    });","","    function getDaysRemainingInTrial(trial_end) {","        let trialEndDate = (new Date(1970, 0, 1));","        trialEndDate.setSeconds(trial_end);","        let today = new Date();","        return Math.floor((trialEndDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));","    }","","    userDetailsService.fetchSubscriptionInfo($scope.sellerId, response => {","        if (response.data.status === \"trialing\") {","            let daysRemaining = getDaysRemainingInTrial(response.data.trial_end);","            if (daysRemaining <= 10)","                Swal.fire({","                    position: 'top-end',","                    type: 'info',","                    title: 'Only ' + daysRemaining + ' days remaining in trial',","                    showConfirmButton: false,","                    showCloseButton: true,","                    customClass: 'swal-trial',","                })","        }","    })","","","    $scope.goToCheckout = function () {","        window.location.href = \"/checkout\";","    }","",">>>>>>> 2f70f64e508c84dc6402472937cc5ee2618a013c","    var hash = window.location.hash;","    if (hash) {","        $(\"#cogsLink\").attr(\"class\", \"nav-link active\");","        window.location.href = \"#cogsDiv\";","        $(\"#userDetailsDiv\").attr(\"class\", \"tab-pane\");","        $(\"#cogsDiv\").attr(\"class\", \"tab-pane in active\");","        listCogsPerUnit();","    }","","    $scope.updateEmail = function () {","","        $.ajax({","            url: '/users/email',","            type: 'PUT',","            contentType: 'application/json',","            data: JSON.stringify({","                newEmail: $scope.newEmail,","            }),","            dataType: 'json',","            success: function (data) {","                if (data.success === true) {","                    let json = {","                        username: $scope.username,","                        sellerId: $scope.sellerId,","                        email: data.newEmail,","                    };","                    //console.log(\"Data\", data);","                    $scope.email = data.newEmail;","                    $window.sessionStorage.setItem(\"userDetails\", JSON.stringify(json));","                    alertService.successAlert(\"Success!\", \"Your email has been updated\")","                        .then(function (isConfirm) {","                            if (isConfirm.value) {","                                window.location.reload();","                            }","                        })","                } else {","                    alertService.errorAlert(\"Error!\", data.detail + \" ; Reason: \" + data.error).then(() => {","                        window.location.reload();","                    });","                }","            },","            error: function (data) {","                alertService.errorAlert(\"Error!\", \"Error in operation. See console for error log\");","                //console.log(data);","            }","        }"]},{"start":{"row":151,"column":20},"end":{"row":151,"column":22},"action":"insert","lines":["//"]}],[{"start":{"row":2,"column":0},"end":{"row":7,"column":48},"action":"remove","lines":["<<<<<<< HEAD","app.controller('dashboardController', function ($scope, $window, cogsUnitService, userDetailsService, alertService, reportService) {","=======","app.controller('dashboardController', function ($scope, $window, cogsUnitService, userDetailsService, alertService) {","    ",">>>>>>> 2f70f64e508c84dc6402472937cc5ee2618a013c"],"id":267},{"start":{"row":2,"column":0},"end":{"row":2,"column":132},"action":"insert","lines":["app.controller('dashboardController', function ($scope, $window, cogsUnitService, userDetailsService, alertService, reportService) {"]}],[{"start":{"row":15,"column":0},"end":{"row":49,"column":48},"action":"remove","lines":["<<<<<<< HEAD","    ","=======","    userDetailsService.fetchPaymentInfo($scope.sellerId, response => {","        $scope.cardInfo = response.data[0].last4;","    });","","    function getDaysRemainingInTrial(trial_end) {","        let trialEndDate = (new Date(1970, 0, 1));","        trialEndDate.setSeconds(trial_end);","        let today = new Date();","        return Math.floor((trialEndDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));","    }","","    userDetailsService.fetchSubscriptionInfo($scope.sellerId, response => {","        if (response.data.status === \"trialing\") {","            let daysRemaining = getDaysRemainingInTrial(response.data.trial_end);","            if (daysRemaining <= 10)","                Swal.fire({","                    position: 'top-end',","                    type: 'info',","                    title: 'Only ' + daysRemaining + ' days remaining in trial',","                    showConfirmButton: false,","                    showCloseButton: true,","                    customClass: 'swal-trial',","                })","        }","    })","","","    $scope.goToCheckout = function () {","        window.location.href = \"/checkout\";","    }","",">>>>>>> 2f70f64e508c84dc6402472937cc5ee2618a013c"],"id":268},{"start":{"row":15,"column":0},"end":{"row":15,"column":4},"action":"insert","lines":["    "]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":41},"end":{"row":7,"column":41},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1558473381530,"hash":"d2a82f83c0e58f06d6690515974518878a32cc64"}